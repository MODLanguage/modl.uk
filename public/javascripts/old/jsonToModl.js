!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.MODLConverter=o():e.MODLConverter=o()}(self,(function(){return(()=>{var e={43:function(e,o,t){var n,r;!function(i,u){"use strict";void 0===(r="function"==typeof(n=function(){var e=function(){},o="undefined",t=typeof window!==o&&typeof window.navigator!==o&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(e,o){var t=e[o];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch(o){return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(n){return"debug"===n&&(n="log"),typeof console!==o&&("trace"===n&&t?i:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function l(o,t){for(var r=0;r<n.length;r++){var i=n[r];this[i]=r<o?e:this.methodFactory(i,o,t)}this.log=this.debug}function c(e,t,n){return function(){typeof console!==o&&(l.call(this,t,n),this[e].apply(this,arguments))}}function a(e,o,t){return u(e)||c.apply(this,arguments)}function s(e,t,r){var i,u=this,c="loglevel";function s(){var e;if(typeof window!==o&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===o)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=r||a,u.getLevel=function(){return i},u.setLevel=function(t,r){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==r&&function(e){var t=(n[e]||"silent").toUpperCase();if(typeof window!==o&&c){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),l.call(u,t,e),typeof console===o&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){s()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var f=s();null==f&&(f=null==t?"WARN":t),u.setLevel(f,!1)}var f=new s,p={};f.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var o=p[e];return o||(o=p[e]=new s(e,f.getLevel(),f.methodFactory)),o};var d=typeof window!==o?window.log:void 0;return f.noConflict=function(){return typeof window!==o&&window.log===f&&(window.log=d),f},f.getLoggers=function(){return p},f.default=f,f})?n.call(o,t,o,e):n)||(e.exports=r)}()},389:function(e,o,t){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.createJsonToModl=void 0;var r=n(t(43)),i=t(494),u=t(902);o.createJsonToModl=function(){return new l};var l=function(){function e(){}return e.prototype.objectToModl=function(e){var o=Array.isArray(e)?a("",e):function(e){return null===e?"null":"object"!=typeof e||Array.isArray(e)?p(e):f(e)}(e);return r.default.debug("Result    : ",o),o},e.prototype.stringToModl=function(e){r.default.debug("Converting: "+e);var o=JSON.parse(e);return this.objectToModl(o)},e}(),c=i.createUnicodeEscaper(),a=function(e,o){var t=c.escape(e);return u.isNonStringPrimitive(t)&&(t='"'+t+'"'),null===o?t+"=null":Array.isArray(o)?t+s(o):"object"==typeof o?t+"("+f(o)+")":function(e,o){var t=d(o);return null!==t?e+"="+t:null}(t,o)||t+"="+p(o)};function s(e){return"["+e.map(p).join(";")+"]"}function f(e){return"object"!=typeof e?d(e):Array.isArray(e)?s(e):Object.keys(e).map((function(o){return a(o,e[o])})).join(";")}function p(e){return Array.isArray(e)?s(e):"object"==typeof e?"("+f(e)+")":d(e)}var d=function(e){return null===e?"null":"string"==typeof e?"null"===e?"`null`":u.escapeAndQuote(e):"boolean"==typeof e?e?"true":"false":"number"==typeof e?Number.isInteger(e)?""+e:""+e.toExponential().replace("e+","E"):null}},494:(e,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createUnicodeEscaper=void 0,o.createUnicodeEscaper=function(){return new t};var t=function(){function e(){}return e.prototype.escape=function(e){for(var o="",t=0;t<e.length;t++){var n=e.codePointAt(t);o+=(r=n)?r>=32&&r<=127?String.fromCodePoint(r):r>=1048576&&r<=1114111?"~u"+r.toString(16):8===r?"\\b":12===r?"\\f":10===r?"\\n":13===r?"\\r":9===r?"\\t":r>=65536&&r<=1048575||r>=4096&&r<=65535?"~u"+r.toString(16):r>=256&&r<=4095?"~u0"+r.toString(16):r>=16&&r<=255?"~u00"+r.toString(16):"~u000"+r.toString(16):"",n&&n>65535&&(t+=1)}var r;return o},e}()},902:(e,o,t)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.isNonStringPrimitive=o.escapeAndQuote=o.doubleQuoteIfNecessary=o.graveQuoteIfNecessary=o.isNumeric=o.shouldBeGraveQuoted=o.escapeGraves=void 0;var n=t(494);o.escapeGraves=function(e){return null!==e?e.replace(/`/g,"~`"):e},o.shouldBeGraveQuoted=new RegExp(".*[()\\[\\];{}:=].*"),o.isNumeric=new RegExp("^[+-]?[0-9]*.?[0-9]+(?:[Ee][+-]?[0-9]+)?$"),o.graveQuoteIfNecessary=function(e){return null!==e&&(o.shouldBeGraveQuoted.test(e)||""===e||o.isNumeric.test(e)&&"00"!==e&&"01"!==e&&"000"!==e||"true"===e||"false"===e||"null"===e)?"`"+e+"`":e},o.doubleQuoteIfNecessary=function(e){return null!==e&&e.includes("~`")?'"'+e+'"':e};var r=n.createUnicodeEscaper();o.escapeAndQuote=function(e){return null===e?e:o.doubleQuoteIfNecessary(o.graveQuoteIfNecessary(o.escapeGraves(r.escape(e))))},o.isNonStringPrimitive=function(e){return i.includes(e)||""+parseFloat(e)===e};var i=["true","false","null"]}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.jsonToModl=void 0;var o=t(389);e.jsonToModl=o.createJsonToModl()})(),n})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NT0RMQ29udmVydGVyL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9NT0RMQ29udmVydGVyLy4vbm9kZV9tb2R1bGVzL2xvZ2xldmVsL2xpYi9sb2dsZXZlbC5qcyIsIndlYnBhY2s6Ly9NT0RMQ29udmVydGVyLy4vc3JjL0pzb25Ub01vZGwudHMiLCJ3ZWJwYWNrOi8vTU9ETENvbnZlcnRlci8uL3NyYy9Vbmljb2RlRXNjYXBlci50cyIsIndlYnBhY2s6Ly9NT0RMQ29udmVydGVyLy4vc3JjL1V0aWxGdW5jcy50cyIsIndlYnBhY2s6Ly9NT0RMQ29udmVydGVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL01PRExDb252ZXJ0ZXIvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsImRlZmluaXRpb24iLCJub29wIiwidW5kZWZpbmVkVHlwZSIsImlzSUUiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ0ZXN0IiwidXNlckFnZW50IiwibG9nTWV0aG9kcyIsImJpbmRNZXRob2QiLCJvYmoiLCJtZXRob2ROYW1lIiwibWV0aG9kIiwiYmluZCIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiY2FsbCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsInRyYWNlRm9ySUUiLCJjb25zb2xlIiwibG9nIiwidHJhY2UiLCJyZWFsTWV0aG9kIiwidW5kZWZpbmVkIiwicmVwbGFjZUxvZ2dpbmdNZXRob2RzIiwibGV2ZWwiLCJsb2dnZXJOYW1lIiwiaSIsImxlbmd0aCIsInRoaXMiLCJtZXRob2RGYWN0b3J5IiwiZGVidWciLCJlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzIiwiZGVmYXVsdE1ldGhvZEZhY3RvcnkiLCJMb2dnZXIiLCJuYW1lIiwiZGVmYXVsdExldmVsIiwiY3VycmVudExldmVsIiwic3RvcmFnZUtleSIsImdldFBlcnNpc3RlZExldmVsIiwic3RvcmVkTGV2ZWwiLCJsb2NhbFN0b3JhZ2UiLCJpZ25vcmUiLCJjb29raWUiLCJkb2N1bWVudCIsImxvY2F0aW9uIiwiaW5kZXhPZiIsImVuY29kZVVSSUNvbXBvbmVudCIsImV4ZWMiLCJzbGljZSIsImxldmVscyIsImdldExldmVsIiwic2V0TGV2ZWwiLCJwZXJzaXN0IiwidG9VcHBlckNhc2UiLCJTSUxFTlQiLCJsZXZlbE51bSIsImxldmVsTmFtZSIsInBlcnNpc3RMZXZlbElmUG9zc2libGUiLCJzZXREZWZhdWx0TGV2ZWwiLCJlbmFibGVBbGwiLCJUUkFDRSIsImRpc2FibGVBbGwiLCJpbml0aWFsTGV2ZWwiLCJkZWZhdWx0TG9nZ2VyIiwiX2xvZ2dlcnNCeU5hbWUiLCJnZXRMb2dnZXIiLCJUeXBlRXJyb3IiLCJsb2dnZXIiLCJfbG9nIiwibm9Db25mbGljdCIsImdldExvZ2dlcnMiLCJjcmVhdGVKc29uVG9Nb2RsIiwiSnNvblRvTW9kbEltcGwiLCJvYmplY3RUb01vZGwiLCJub2RlIiwibW9kbFJlc3VsdCIsIkFycmF5IiwiaXNBcnJheSIsInBhaXJUb01vZGxSZWN1cnNpdmUiLCJ0b01vZGwiLCJvYmplY3RUb01vZGxNYXBXaXRob3V0UGFyZW50aGVzZXMiLCJ0b1RvcExldmVsTW9kbCIsInN0cmluZ1RvTW9kbCIsImpzb24iLCJKU09OIiwicGFyc2UiLCJlc2NhcGVyIiwiY3JlYXRlVW5pY29kZUVzY2FwZXIiLCJrZXkiLCJlc2NhcGVkS2V5IiwiZXNjYXBlIiwiaXNOb25TdHJpbmdQcmltaXRpdmUiLCJhcnJheVRvTW9kbEFycmF5Iiwibm9kZUFzU3RyaW5nIiwicHJpbWl0aXZlTm9kZVRvTW9kbCIsInByaW1pdGl2ZVRvTW9kbCIsIm1hcCIsImpvaW4iLCJPYmplY3QiLCJrZXlzIiwiayIsImVzY2FwZUFuZFF1b3RlIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwidG9FeHBvbmVudGlhbCIsInJlcGxhY2UiLCJVbmljb2RlRXNjYXBlckltcGwiLCJzIiwicmVzdWx0IiwiY3AiLCJjb2RlUG9pbnRBdCIsImMiLCJTdHJpbmciLCJmcm9tQ29kZVBvaW50IiwidG9TdHJpbmciLCJlc2NhcGVHcmF2ZXMiLCJzaG91bGRCZUdyYXZlUXVvdGVkIiwiUmVnRXhwIiwiaXNOdW1lcmljIiwiZ3JhdmVRdW90ZUlmTmVjZXNzYXJ5IiwiZG91YmxlUXVvdGVJZk5lY2Vzc2FyeSIsImluY2x1ZGVzIiwidW5pY29kZUVzY2FwZXIiLCJwcmltaXRpdmVzIiwicGFyc2VGbG9hdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJqc29uVG9Nb2RsIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQXVCLGNBQUlELElBRTNCRCxFQUFvQixjQUFJQyxJQVIxQixDQVNHSyxNQUFNLFdBQ1QsTSxnQ0NWQSxTQU1DLFNBQVVOLEVBQU1PLEdBQ2Isa0JBRXFCLDBCQUFqQixFQU1BLFdBSUosSUFBSUMsRUFBTyxhQUNQQyxFQUFnQixZQUNoQkMsU0FBZUMsU0FBV0YsVUFBMEJFLE9BQU9DLFlBQWNILEdBQ3pFLGtCQUFrQkksS0FBS0YsT0FBT0MsVUFBVUUsV0FHeENDLEVBQWEsQ0FDYixRQUNBLFFBQ0EsT0FDQSxPQUNBLFNBSUosU0FBU0MsRUFBV0MsRUFBS0MsR0FDckIsSUFBSUMsRUFBU0YsRUFBSUMsR0FDakIsR0FBMkIsbUJBQWhCQyxFQUFPQyxLQUNkLE9BQU9ELEVBQU9DLEtBQUtILEdBRW5CLElBQ0ksT0FBT0ksU0FBU0MsVUFBVUYsS0FBS0csS0FBS0osRUFBUUYsR0FDOUMsTUFBT08sR0FFTCxPQUFPLFdBQ0gsT0FBT0gs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QSxFQUFPRCxRQUFTc0ksR0FHcEVySSxFQUFPRCxRLCtHQ3JCZixhQUVhLEVBQUEwSSxXQUFhLEVBQUEzRCxvQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJNT0RMQ29udmVydGVyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk1PRExDb252ZXJ0ZXJcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvKlxuKiBsb2dsZXZlbCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbFxuKlxuKiBDb3B5cmlnaHQgKGMpIDIwMTMgVGltIFBlcnJ5XG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiovXG4oZnVuY3Rpb24gKHJvb3QsIGRlZmluaXRpb24pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShkZWZpbml0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QubG9nID0gZGVmaW5pdGlvbigpO1xuICAgIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZVxuICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgdW5kZWZpbmVkVHlwZSA9IFwidW5kZWZpbmVkXCI7XG4gICAgdmFyIGlzSUUgPSAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSkgJiYgKHR5cGVvZiB3aW5kb3cubmF2aWdhdG9yICE9PSB1bmRlZmluZWRUeXBlKSAmJiAoXG4gICAgICAgIC9UcmlkZW50XFwvfE1TSUUgLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICk7XG5cbiAgICB2YXIgbG9nTWV0aG9kcyA9IFtcbiAgICAgICAgXCJ0cmFjZVwiLFxuICAgICAgICBcImRlYnVnXCIsXG4gICAgICAgIFwiaW5mb1wiLFxuICAgICAgICBcIndhcm5cIixcbiAgICAgICAgXCJlcnJvclwiXG4gICAgXTtcblxuICAgIC8vIENyb3NzLWJyb3dzZXIgYmluZCBlcXVpdmFsZW50IHRoYXQgd29ya3MgYXQgbGVhc3QgYmFjayB0byBJRTZcbiAgICBmdW5jdGlvbiBiaW5kTWV0aG9kKG9iaiwgbWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgbWV0aG9kID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZC5iaW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kLmJpbmQob2JqKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwobWV0aG9kLCBvYmopO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIE1pc3NpbmcgYmluZCBzaGltIG9yIElFOCArIE1vZGVybml6ciwgZmFsbGJhY2sgdG8gd3JhcHBpbmdcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobWV0aG9kLCBbb2JqLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJhY2UoKSBkb2Vzbid0IHByaW50IHRoZSBtZXNzYWdlIGluIElFLCBzbyBmb3IgdGhhdCBjYXNlIHdlIG5lZWQgdG8gd3JhcCBpdFxuICAgIGZ1bmN0aW9uIHRyYWNlRm9ySUUoKSB7XG4gICAgICAgIGlmIChjb25zb2xlLmxvZykge1xuICAgICAgICAgICAgaWYgKGNvbnNvbGUubG9nLmFwcGx5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb2xkIElFLCBuYXRpdmUgY29uc29sZSBtZXRob2RzIHRoZW1zZWx2ZXMgZG9uJ3QgaGF2ZSBhcHBseSgpLlxuICAgICAgICAgICAgICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShjb25zb2xlLmxvZywgW2NvbnNvbGUsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25zb2xlLnRyYWNlKSBjb25zb2xlLnRyYWNlKCk7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIGJlc3QgbG9nZ2luZyBtZXRob2QgcG9zc2libGUgZm9yIHRoaXMgZW52XG4gICAgLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzXG4gICAgZnVuY3Rpb24gcmVhbE1ldGhvZChtZXRob2ROYW1lKSB7XG4gICAgICAgIGlmIChtZXRob2ROYW1lID09PSAnZGVidWcnKSB7XG4gICAgICAgICAgICBtZXRob2ROYW1lID0gJ2xvZyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm8gbWV0aG9kIHBvc3NpYmxlLCBmb3Igbm93IC0gZml4ZWQgbGF0ZXIgYnkgZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlc1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZE5hbWUgPT09ICd0cmFjZScgJiYgaXNJRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNlRm9ySUU7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uc29sZVttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCBtZXRob2ROYW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25zb2xlLmxvZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYmluZE1ldGhvZChjb25zb2xlLCAnbG9nJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9vcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZXNlIHByaXZhdGUgZnVuY3Rpb25zIGFsd2F5cyBuZWVkIGB0aGlzYCB0byBiZSBzZXQgcHJvcGVybHlcblxuICAgIGZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhsZXZlbCwgbG9nZ2VyTmFtZSkge1xuICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvZ01ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gbG9nTWV0aG9kc1tpXTtcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0gPSAoaSA8IGxldmVsKSA/XG4gICAgICAgICAgICAgICAgbm9vcCA6XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmluZSBsb2cubG9nIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWdcbiAgICAgICAgdGhpcy5sb2cgPSB0aGlzLmRlYnVnO1xuICAgIH1cblxuICAgIC8vIEluIG9sZCBJRSB2ZXJzaW9ucywgdGhlIGNvbnNvbGUgaXNuJ3QgcHJlc2VudCB1bnRpbCB5b3UgZmlyc3Qgb3BlbiBpdC5cbiAgICAvLyBXZSBidWlsZCByZWFsTWV0aG9kKCkgcmVwbGFjZW1lbnRzIGhlcmUgdGhhdCByZWdlbmVyYXRlIGxvZ2dpbmcgbWV0aG9kc1xuICAgIGZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkVHlwZSkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMsIGxldmVsLCBsb2dnZXJOYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQnkgZGVmYXVsdCwgd2UgdXNlIGNsb3NlbHkgYm91bmQgcmVhbCBtZXRob2RzIHdoZXJldmVyIHBvc3NpYmxlLCBhbmRcbiAgICAvLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLlxuICAgIGZ1bmN0aW9uIGRlZmF1bHRNZXRob2RGYWN0b3J5KG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKSB7XG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIHJldHVybiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHx8XG4gICAgICAgICAgICAgICBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTG9nZ2VyKG5hbWUsIGRlZmF1bHRMZXZlbCwgZmFjdG9yeSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGN1cnJlbnRMZXZlbDtcblxuICAgICAgdmFyIHN0b3JhZ2VLZXkgPSBcImxvZ2xldmVsXCI7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgc3RvcmFnZUtleSArPSBcIjpcIiArIG5hbWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSB7XG4gICAgICAgIHN0b3JhZ2VLZXkgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBlcnNpc3RMZXZlbElmUG9zc2libGUobGV2ZWxOdW0pIHtcbiAgICAgICAgICB2YXIgbGV2ZWxOYW1lID0gKGxvZ01ldGhvZHNbbGV2ZWxOdW1dIHx8ICdzaWxlbnQnKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IHVuZGVmaW5lZFR5cGUgfHwgIXN0b3JhZ2VLZXkpIHJldHVybjtcblxuICAgICAgICAgIC8vIFVzZSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtzdG9yYWdlS2V5XSA9IGxldmVsTmFtZTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cblxuICAgICAgICAgIC8vIFVzZSBzZXNzaW9uIGNvb2tpZSBhcyBmYWxsYmFja1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5jb29raWUgPVxuICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPVwiICsgbGV2ZWxOYW1lICsgXCI7XCI7XG4gICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRQZXJzaXN0ZWRMZXZlbCgpIHtcbiAgICAgICAgICB2YXIgc3RvcmVkTGV2ZWw7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gdW5kZWZpbmVkVHlwZSB8fCAhc3RvcmFnZUtleSkgcmV0dXJuO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgc3RvcmVkTGV2ZWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlW3N0b3JhZ2VLZXldO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cblxuICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGNvb2tpZXMgaWYgbG9jYWwgc3RvcmFnZSBnaXZlcyB1cyBub3RoaW5nXG4gICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZWRMZXZlbCA9PT0gdW5kZWZpbmVkVHlwZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgdmFyIGNvb2tpZSA9IHdpbmRvdy5kb2N1bWVudC5jb29raWU7XG4gICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBjb29raWUuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RvcmFnZUtleSkgKyBcIj1cIik7XG4gICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24gIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc3RvcmVkTGV2ZWwgPSAvXihbXjtdKykvLmV4ZWMoY29va2llLnNsaWNlKGxvY2F0aW9uKSlbMV07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIGxldmVsIGlzIG5vdCB2YWxpZCwgdHJlYXQgaXQgYXMgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxuICAgICAgICAgIGlmIChzZWxmLmxldmVsc1tzdG9yZWRMZXZlbF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gc3RvcmVkTGV2ZWw7XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAgKlxuICAgICAgICogUHVibGljIGxvZ2dlciBBUEkgLSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsIGZvciBkZXRhaWxzXG4gICAgICAgKlxuICAgICAgICovXG5cbiAgICAgIHNlbGYubmFtZSA9IG5hbWU7XG5cbiAgICAgIHNlbGYubGV2ZWxzID0geyBcIlRSQUNFXCI6IDAsIFwiREVCVUdcIjogMSwgXCJJTkZPXCI6IDIsIFwiV0FSTlwiOiAzLFxuICAgICAgICAgIFwiRVJST1JcIjogNCwgXCJTSUxFTlRcIjogNX07XG5cbiAgICAgIHNlbGYubWV0aG9kRmFjdG9yeSA9IGZhY3RvcnkgfHwgZGVmYXVsdE1ldGhvZEZhY3Rvcnk7XG5cbiAgICAgIHNlbGYuZ2V0TGV2ZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGN1cnJlbnRMZXZlbDtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuc2V0TGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwsIHBlcnNpc3QpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGxldmVsID09PSBcInN0cmluZ1wiICYmIHNlbGYubGV2ZWxzW2xldmVsLnRvVXBwZXJDYXNlKCldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbGV2ZWwgPSBzZWxmLmxldmVsc1tsZXZlbC50b1VwcGVyQ2FzZSgpXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBsZXZlbCA9PT0gXCJudW1iZXJcIiAmJiBsZXZlbCA+PSAwICYmIGxldmVsIDw9IHNlbGYubGV2ZWxzLlNJTEVOVCkge1xuICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgICAgICAgaWYgKHBlcnNpc3QgIT09IGZhbHNlKSB7ICAvLyBkZWZhdWx0cyB0byB0cnVlXG4gICAgICAgICAgICAgICAgICBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKGxldmVsKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbChzZWxmLCBsZXZlbCwgbmFtZSk7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gdW5kZWZpbmVkVHlwZSAmJiBsZXZlbCA8IHNlbGYubGV2ZWxzLlNJTEVOVCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IFwibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIgKyBsZXZlbDtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnNldERlZmF1bHRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgIGlmICghZ2V0UGVyc2lzdGVkTGV2ZWwoKSkge1xuICAgICAgICAgICAgICBzZWxmLnNldExldmVsKGxldmVsLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2VsZi5lbmFibGVBbGwgPSBmdW5jdGlvbihwZXJzaXN0KSB7XG4gICAgICAgICAgc2VsZi5zZXRMZXZlbChzZWxmLmxldmVscy5UUkFDRSwgcGVyc2lzdCk7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmRpc2FibGVBbGwgPSBmdW5jdGlvbihwZXJzaXN0KSB7XG4gICAgICAgICAgc2VsZi5zZXRMZXZlbChzZWxmLmxldmVscy5TSUxFTlQsIHBlcnNpc3QpO1xuICAgICAgfTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHRoZSByaWdodCBsZXZlbFxuICAgICAgdmFyIGluaXRpYWxMZXZlbCA9IGdldFBlcnNpc3RlZExldmVsKCk7XG4gICAgICBpZiAoaW5pdGlhbExldmVsID09IG51bGwpIHtcbiAgICAgICAgICBpbml0aWFsTGV2ZWwgPSBkZWZhdWx0TGV2ZWwgPT0gbnVsbCA/IFwiV0FSTlwiIDogZGVmYXVsdExldmVsO1xuICAgICAgfVxuICAgICAgc2VsZi5zZXRMZXZlbChpbml0aWFsTGV2ZWwsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqXG4gICAgICogVG9wLWxldmVsIEFQSVxuICAgICAqXG4gICAgICovXG5cbiAgICB2YXIgZGVmYXVsdExvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuICAgIHZhciBfbG9nZ2Vyc0J5TmFtZSA9IHt9O1xuICAgIGRlZmF1bHRMb2dnZXIuZ2V0TG9nZ2VyID0gZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWUpIHtcbiAgICAgICAgaWYgKCh0eXBlb2YgbmFtZSAhPT0gXCJzeW1ib2xcIiAmJiB0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIikgfHwgbmFtZSA9PT0gXCJcIikge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBzdXBwbHkgYSBuYW1lIHdoZW4gY3JlYXRpbmcgYSBsb2dnZXIuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxvZ2dlciA9IF9sb2dnZXJzQnlOYW1lW25hbWVdO1xuICAgICAgICBpZiAoIWxvZ2dlcikge1xuICAgICAgICAgIGxvZ2dlciA9IF9sb2dnZXJzQnlOYW1lW25hbWVdID0gbmV3IExvZ2dlcihcbiAgICAgICAgICAgIG5hbWUsIGRlZmF1bHRMb2dnZXIuZ2V0TGV2ZWwoKSwgZGVmYXVsdExvZ2dlci5tZXRob2RGYWN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9nZ2VyO1xuICAgIH07XG5cbiAgICAvLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGVcbiAgICB2YXIgX2xvZyA9ICh0eXBlb2Ygd2luZG93ICE9PSB1bmRlZmluZWRUeXBlKSA/IHdpbmRvdy5sb2cgOiB1bmRlZmluZWQ7XG4gICAgZGVmYXVsdExvZ2dlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSB1bmRlZmluZWRUeXBlICYmXG4gICAgICAgICAgICAgICB3aW5kb3cubG9nID09PSBkZWZhdWx0TG9nZ2VyKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9nID0gX2xvZztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xuICAgIH07XG5cbiAgICBkZWZhdWx0TG9nZ2VyLmdldExvZ2dlcnMgPSBmdW5jdGlvbiBnZXRMb2dnZXJzKCkge1xuICAgICAgICByZXR1cm4gX2xvZ2dlcnNCeU5hbWU7XG4gICAgfTtcblxuICAgIC8vIEVTNiBkZWZhdWx0IGV4cG9ydCwgZm9yIGNvbXBhdGliaWxpdHlcbiAgICBkZWZhdWx0TG9nZ2VyWydkZWZhdWx0J10gPSBkZWZhdWx0TG9nZ2VyO1xuXG4gICAgcmV0dXJuIGRlZmF1bHRMb2dnZXI7XG59KSk7XG4iLCJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJztcbmltcG9ydCB7IGNyZWF0ZVVuaWNvZGVFc2NhcGVyIH0gZnJvbSAnLi9Vbmljb2RlRXNjYXBlcic7XG5pbXBvcnQgeyBlc2NhcGVBbmRRdW90ZSwgaXNOb25TdHJpbmdQcmltaXRpdmUgfSBmcm9tICcuL1V0aWxGdW5jcyc7XG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXhwb3J0c1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBpbnRlcmZhY2UgSnNvblRvTW9kbCB7XG4gIHN0cmluZ1RvTW9kbChqc29uOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsO1xuICBvYmplY3RUb01vZGwobm9kZTogb2JqZWN0KTogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUpzb25Ub01vZGwgPSAoKTogSnNvblRvTW9kbCA9PiB7XG4gIHJldHVybiBuZXcgSnNvblRvTW9kbEltcGwoKTtcbn07XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBJbnRlcm5hbHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNsYXNzIEpzb25Ub01vZGxJbXBsIGltcGxlbWVudHMgSnNvblRvTW9kbCB7XG4gIG9iamVjdFRvTW9kbChub2RlOiBvYmplY3QpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvL1xuICAgIC8vIFRvcC1sZXZlbCBpdGVtcyBuZWVkIHNwZWNpYWwgaGFuZGxpbmdcbiAgICAvL1xuICAgIGNvbnN0IG1vZGxSZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBBcnJheS5pc0FycmF5KG5vZGUpID8gcGFpclRvTW9kbFJlY3Vyc2l2ZSgnJywgbm9kZSkgOiB0b1RvcExldmVsTW9kbChub2RlKTtcblxuICAgIGxvZy5kZWJ1ZygnUmVzdWx0ICAgIDogJywgbW9kbFJlc3VsdCk7XG5cbiAgICByZXR1cm4gbW9kbFJlc3VsdDtcbiAgfVxuXG4gIHN0cmluZ1RvTW9kbChqc29uOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBsb2cuZGVidWcoYENvbnZlcnRpbmc6ICR7anNvbn1gKTtcblxuICAgIGNvbnN0IG5vZGUgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIHJldHVybiB0aGlzLm9iamVjdFRvTW9kbChub2RlKTtcbiAgfVxufVxuXG5jb25zdCBlc2NhcGVyID0gY3JlYXRlVW5pY29kZUVzY2FwZXIoKTtcblxuY29uc3QgcGFpclRvTW9kbFJlY3Vyc2l2ZSA9IChrZXk6IHN0cmluZywgbm9kZTogYW55KTogc3RyaW5nID0+IHtcbiAgbGV0IGVzY2FwZWRLZXkgPSBlc2NhcGVyLmVzY2FwZShrZXkpO1xuICBpZiAoaXNOb25TdHJpbmdQcmltaXRpdmUoZXNjYXBlZEtleSkpIHtcbiAgICBlc2NhcGVkS2V5ID0gJ1wiJyArIGVzY2FwZWRLZXkgKyAnXCInO1xuICB9XG4gIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2VzY2FwZWRLZXl9PW51bGxgO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgcmV0dXJuIGVzY2FwZWRLZXkgKyBhcnJheVRvTW9kbEFycmF5KG5vZGUpO1xuICB9XG4gIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gYCR7ZXNjYXBlZEtleX0oJHtvYmplY3RUb01vZGxNYXBXaXRob3V0UGFyZW50aGVzZXMobm9kZSl9KWA7XG4gIH1cbiAgY29uc3QgcmVzdWx0OiBzdHJpbmcgfCBudWxsID0gcHJpbWl0aXZlVG9Nb2RsKGVzY2FwZWRLZXksIG5vZGUpO1xuICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0IDogYCR7ZXNjYXBlZEtleX09JHt0b01vZGwobm9kZSl9YDtcbn07XG5cbmZ1bmN0aW9uIHRvVG9wTGV2ZWxNb2RsKG5vZGU6IGFueSk6IHN0cmluZyB8IG51bGwge1xuICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH1cbiAgaWYgKHR5cGVvZiBub2RlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgIHJldHVybiBvYmplY3RUb01vZGxNYXBXaXRob3V0UGFyZW50aGVzZXMobm9kZSk7XG4gIH1cbiAgcmV0dXJuIHRvTW9kbChub2RlKTtcbn1cblxuZnVuY3Rpb24gYXJyYXlUb01vZGxBcnJheShub2RlOiBBcnJheTxhbnk+KTogc3RyaW5nIHtcbiAgcmV0dXJuICdbJyArIG5vZGUubWFwKHRvTW9kbCkuam9pbignOycpICsgJ10nO1xufVxuXG5mdW5jdGlvbiBvYmplY3RUb01vZGxNYXBXaXRob3V0UGFyZW50aGVzZXMobm9kZTogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcHJpbWl0aXZlTm9kZVRvTW9kbChub2RlKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgIHJldHVybiBhcnJheVRvTW9kbEFycmF5KG5vZGUpO1xuICB9XG4gIHJldHVybiBPYmplY3Qua2V5cyhub2RlKVxuICAgIC5tYXAoKGspID0+IHBhaXJUb01vZGxSZWN1cnNpdmUoaywgbm9kZVtrXSkpXG4gICAgLmpvaW4oJzsnKTtcbn1cblxuZnVuY3Rpb24gcHJpbWl0aXZlVG9Nb2RsKGtleTogc3RyaW5nLCBub2RlOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3Qgbm9kZUFzU3RyaW5nOiBzdHJpbmcgfCBudWxsID0gcHJpbWl0aXZlTm9kZVRvTW9kbChub2RlKTtcbiAgaWYgKG5vZGVBc1N0cmluZyAhPT0gbnVsbCkge1xuICAgIHJldHVybiBrZXkgKyAnPScgKyBub2RlQXNTdHJpbmc7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHRvTW9kbChub2RlOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICByZXR1cm4gYXJyYXlUb01vZGxBcnJheShub2RlKTtcbiAgfVxuICBpZiAodHlwZW9mIG5vZGUgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGAoJHtvYmplY3RUb01vZGxNYXBXaXRob3V0UGFyZW50aGVzZXMobm9kZSl9KWA7XG4gIH1cbiAgcmV0dXJuIHByaW1pdGl2ZU5vZGVUb01vZGwobm9kZSk7XG59XG5cbmNvbnN0IHByaW1pdGl2ZU5vZGVUb01vZGwgPSAobm9kZTogYW55KTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIC8vXG4gIC8vIEhhbmRsaW5nIGZvciBudWxsc1xuICAvL1xuICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH1cbiAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykge1xuICAgIGlmICgnbnVsbCcgPT09IG5vZGUpIHtcbiAgICAgIHJldHVybiAnYG51bGxgJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVzY2FwZUFuZFF1b3RlKG5vZGUpO1xuICAgIH1cbiAgfVxuICAvL1xuICAvLyBIYW5kbGluZyBmb3IgYm9vbGVhbnNcbiAgLy9cbiAgaWYgKHR5cGVvZiBub2RlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbm9kZSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gIH1cbiAgLy9cbiAgLy8gSGFuZGxpbmcgZm9yIG51bWJlcnNcbiAgLy9cbiAgaWYgKHR5cGVvZiBub2RlID09PSAnbnVtYmVyJykge1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKG5vZGUpKSB7XG4gICAgICByZXR1cm4gYCR7bm9kZX1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7bm9kZS50b0V4cG9uZW50aWFsKCkucmVwbGFjZSgnZSsnLCAnRScpfWA7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuIiwiZXhwb3J0IGludGVyZmFjZSBVbmljb2RlRXNjYXBlciB7XG4gIGVzY2FwZShzOiBzdHJpbmcpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVVbmljb2RlRXNjYXBlciA9ICgpOiBVbmljb2RlRXNjYXBlciA9PiB7XG4gIHJldHVybiBuZXcgVW5pY29kZUVzY2FwZXJJbXBsKCk7XG59O1xuXG5jbGFzcyBVbmljb2RlRXNjYXBlckltcGwgaW1wbGVtZW50cyBVbmljb2RlRXNjYXBlciB7XG4gIGVzY2FwZShzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNwID0gcy5jb2RlUG9pbnRBdChpKTtcbiAgICAgIHJlc3VsdCArPSBlc2NhcGVDaGFyKGNwKTtcbiAgICAgIGlmIChjcCAmJiBjcCA+IDB4ZmZmZikge1xuICAgICAgICBpICs9IDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuY29uc3QgQkFDS1NQQUNFID0gMHgwODtcbmNvbnN0IEZPUk1GRUVEID0gMHgwYztcbmNvbnN0IExJTkVGRUVEID0gMHgwYTtcbmNvbnN0IENBUlJJQUdFX1JFVFVSTiA9IDB4MGQ7XG5jb25zdCBUQUIgPSAweDA5O1xuXG5mdW5jdGlvbiBlc2NhcGVDaGFyKGM6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICBpZiAoIWMpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBpZiAoYyA+PSAzMiAmJiBjIDw9IDEyNykge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChjKTtcbiAgfSBlbHNlIGlmIChjID49IDB4MTAwMDAwICYmIGMgPD0gMHgxMGZmZmYpIHtcbiAgICByZXR1cm4gYH51JHtjLnRvU3RyaW5nKDE2KX1gO1xuICB9IGVsc2UgaWYgKGMgPT09IEJBQ0tTUEFDRSkge1xuICAgIHJldHVybiAnXFxcXGInO1xuICB9IGVsc2UgaWYgKGMgPT09IEZPUk1GRUVEKSB7XG4gICAgcmV0dXJuICdcXFxcZic7XG4gIH0gZWxzZSBpZiAoYyA9PT0gTElORUZFRUQpIHtcbiAgICByZXR1cm4gJ1xcXFxuJztcbiAgfSBlbHNlIGlmIChjID09PSBDQVJSSUFHRV9SRVRVUk4pIHtcbiAgICByZXR1cm4gJ1xcXFxyJztcbiAgfSBlbHNlIGlmIChjID09PSBUQUIpIHtcbiAgICByZXR1cm4gJ1xcXFx0JztcbiAgfSBlbHNlIGlmIChjID49IDB4MTAwMDAgJiYgYyA8PSAweGZmZmZmKSB7XG4gICAgcmV0dXJuIGB+dSR7Yy50b1N0cmluZygxNil9YDtcbiAgfSBlbHNlIGlmIChjID49IDB4MTAwMCAmJiBjIDw9IDB4ZmZmZikge1xuICAgIHJldHVybiBgfnUke2MudG9TdHJpbmcoMTYpfWA7XG4gIH0gZWxzZSBpZiAoYyA+PSAweDEwMCAmJiBjIDw9IDB4ZmZmKSB7XG4gICAgcmV0dXJuIGB+dTAke2MudG9TdHJpbmcoMTYpfWA7XG4gIH0gZWxzZSBpZiAoYyA+PSAweDEwICYmIGMgPD0gMHhmZikge1xuICAgIHJldHVybiBgfnUwMCR7Yy50b1N0cmluZygxNil9YDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYH51MDAwJHtjLnRvU3RyaW5nKDE2KX1gO1xuICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVVbmljb2RlRXNjYXBlciB9IGZyb20gJy4vVW5pY29kZUVzY2FwZXInO1xuLyoqXG4gKiBFc2NhcGUgZ3JhdmVzLlxuICovXG5leHBvcnQgY29uc3QgZXNjYXBlR3JhdmVzID0gKHM6IHN0cmluZyB8IG51bGwpID0+IChzICE9PSBudWxsID8gcy5yZXBsYWNlKC9gL2csICd+YCcpIDogcyk7XG5cbmV4cG9ydCBjb25zdCBzaG91bGRCZUdyYXZlUXVvdGVkID0gbmV3IFJlZ0V4cCgnLipbKClcXFxcW1xcXFxdO3t9Oj1dLionKTtcbmV4cG9ydCBjb25zdCBpc051bWVyaWMgPSBuZXcgUmVnRXhwKCdeWystXT9bMC05XSouP1swLTldKyg/OltFZV1bKy1dP1swLTldKyk/JCcpO1xuXG4vKipcbiAqIFNvbWUgTU9ETCBzdHJpbmcgbmVlZCBiYWNrdGljayBxdW90ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBncmF2ZVF1b3RlSWZOZWNlc3NhcnkgPSAoczogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICBpZiAoXG4gICAgcyAhPT0gbnVsbCAmJlxuICAgIChzaG91bGRCZUdyYXZlUXVvdGVkLnRlc3QocykgfHwgcyA9PT0gJycgfHwgKGlzTnVtZXJpYy50ZXN0KHMpICYmIHMgIT09ICcwMCcgJiYgcyAhPT0gJzAxJyAmJiBzICE9PSAnMDAwJykgfHwgJ3RydWUnID09PSBzIHx8ICdmYWxzZScgPT09IHMgfHwgJ251bGwnID09PSBzKVxuICApIHtcbiAgICByZXR1cm4gJ2AnICsgcyArICdgJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcztcbiAgfVxufTtcblxuLyoqXG4gKiBTb21lIE1PREwgc3RyaW5nIG5lZWQgYmFja3RpY2sgcXVvdGVzLlxuICovXG5leHBvcnQgY29uc3QgZG91YmxlUXVvdGVJZk5lY2Vzc2FyeSA9IChzOiBzdHJpbmcgfCBudWxsKSA9PiAocyAhPT0gbnVsbCAmJiBzLmluY2x1ZGVzKCd+YCcpID8gJ1wiJyArIHMgKyAnXCInIDogcyk7XG5cbmNvbnN0IHVuaWNvZGVFc2NhcGVyID0gY3JlYXRlVW5pY29kZUVzY2FwZXIoKTtcblxuLyoqXG4gKiBIYW5keSBmdW5jdGlvbiBjb21wb3NpdGlvblxuICovXG5leHBvcnQgY29uc3QgZXNjYXBlQW5kUXVvdGUgPSAoczogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xuICBpZiAocyA9PT0gbnVsbCkge1xuICAgIHJldHVybiBzO1xuICB9XG4gIHJldHVybiBkb3VibGVRdW90ZUlmTmVjZXNzYXJ5KGdyYXZlUXVvdGVJZk5lY2Vzc2FyeShlc2NhcGVHcmF2ZXModW5pY29kZUVzY2FwZXIuZXNjYXBlKHMpKSkpO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgdmFsdWUgaXMgYSBub24tc3RyaW5nIHByaW1pdGl2ZS5cbiAqXG4gKiBAcGFyYW0gZXNjYXBlZEtleVxuICogQHJldHVybiB0cnVlIG9yIGZhbHNlXG4gKi9cbmV4cG9ydCBjb25zdCBpc05vblN0cmluZ1ByaW1pdGl2ZSA9IChzOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgLy8gSXMgaXQgdHJ1ZSwgZmFsc2UsIG51bGwsIG9yIG51bWVyaWM/XG4gIHJldHVybiBwcmltaXRpdmVzLmluY2x1ZGVzKHMpIHx8IGAke3BhcnNlRmxvYXQocyl9YCA9PT0gcztcbn07XG5cbmNvbnN0IHByaW1pdGl2ZXMgPSBbJ3RydWUnLCAnZmFsc2UnLCAnbnVsbCddO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IGNyZWF0ZUpzb25Ub01vZGwgfSBmcm9tICcuL0pzb25Ub01vZGwnO1xuXG5leHBvcnQgY29uc3QganNvblRvTW9kbCA9IGNyZWF0ZUpzb25Ub01vZGwoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=